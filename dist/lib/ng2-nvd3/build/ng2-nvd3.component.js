"use strict";var __decorate=this&&this.__decorate||function(t,e,i,r){var a,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(s=(o<3?a(s):o>3?a(e,i,s):a(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),NvD3Component=function(){function t(t){this.el=t.nativeElement}return t.prototype.ngOnChanges=function(t){this.options&&(this.chart&&this.chartType===this.options.chart.type?this.updateWithOptions(this.options):this.initChart(this.options))},t.prototype.initChart=function(t){var e=this;this.clearElement(),t&&(this.chart=nv.models[t.chart.type](),this.chartType=this.options.chart.type,this.chart.id=Math.random().toString(36).substr(2,15),this.updateWithOptions(t),nv.addGraph(function(){if(e.chart)return e.chart.resizeHandler&&e.chart.resizeHandler.clear(),e.chart.resizeHandler=nv.utils.windowResize(function(){e.chart&&e.chart.update&&e.chart.update()}),e.chart},t.chart.callback))},t.prototype.updateWithOptions=function(t){if(t){for(var e in this.chart)if(this.chart.hasOwnProperty(e)){this.chart[e];"_"===e[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(e)>=0||("dispatch"===e?this.configureEvents(this.chart[e],t.chart[e]):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","scatters1","scatters2","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2","sankeyChart"].indexOf(e)>=0||"stacked"===e&&"stackedAreaChart"===t.chart.type?this.configure(this.chart[e],t.chart[e],t.chart.type):("xTickFormat"!==e&&"yTickFormat"!==e||"lineWithFocusChart"!==t.chart.type)&&("tooltips"===e&&"boxPlotChart"===t.chart.type||("tooltipXContent"!==e&&"tooltipYContent"!==e||"scatterChart"!==t.chart.type)&&(void 0===t.chart[e]||null===t.chart[e]||this.chart[e](t.chart[e]))))}this.updateWithData(this.data)}},t.prototype.updateWithData=function(t){if(t){var e=this.el.querySelector("svg");e?this.svg=d3.select(e):this.svg=d3.select(this.el).append("svg"),this.updateSize(),this.svg.datum(t).call(this.chart)}},t.prototype.updateSize=function(){if(this.svg){var t=void 0,e=void 0;(t=this.options.chart.height)&&(isNaN(+t)||(t+="px"),this.svg.attr("height",t).style({height:t})),(e=this.options.chart.width)?(isNaN(+e)||(e+="px"),this.svg.attr("width",e).style({width:e})):this.svg.attr("width","100%").style({width:"100%"})}},t.prototype.configure=function(t,e,i){if(t&&e)for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];"_"===r[0]||("dispatch"===r?this.configureEvents(a,e[r]):"tooltip"===r?this.configure(t[r],e[r],i):"contentGenerator"===r?e[r]&&t[r](e[r]):["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close"].indexOf(r)===-1&&(void 0===e[r]||null===e[r]||t[r](e[r])))}},t.prototype.configureEvents=function(t,e){if(t&&e)for(var i in t)if(t.hasOwnProperty(i)){t[i];void 0===e[i]||null===e[i]||t.on(i+"._",e[i])}},t.prototype.clearElement=function(){if(this.el.innerHTML="",this.chart&&this.chart.tooltip&&this.chart.tooltip.id&&d3.select("#"+this.chart.tooltip.id()).remove(),nv.graphs&&this.chart)for(var t=nv.graphs.length-1;t>=0;t--)nv.graphs[t]&&nv.graphs[t].id===this.chart.id&&nv.graphs.splice(t,1);nv.tooltip&&nv.tooltip.cleanup&&nv.tooltip.cleanup(),this.chart&&this.chart.resizeHandler&&this.chart.resizeHandler.clear(),this.chart=null},t}();__decorate([core_1.Input(),__metadata("design:type",Object)],NvD3Component.prototype,"options",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],NvD3Component.prototype,"data",void 0),NvD3Component=__decorate([core_1.Component({selector:"nvd3",template:""}),__metadata("design:paramtypes",[core_1.ElementRef])],NvD3Component),exports.NvD3Component=NvD3Component;